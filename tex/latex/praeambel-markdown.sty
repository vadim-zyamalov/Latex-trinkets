\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{praeambel-markdown}[2025/03/26 My personal preamble for Markdown]

\RequirePackage{iftex}

\RequirePackage{csquotes}
\RequirePackage{bookmark}
\RequirePackage{parskip}

% ------ %
% Шрифты %
% ------ %
\RequirePackage{moresize}

% ------------------------------- %
% Математические шрифты и символы %
% ------------------------------- %
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsthm}
\RequirePackage{nicefrac}

% https://tex.stackexchange.com/q/552864/283103
\let\normalunderbrace=\underbrace
\RequirePackage{mathtools}
\let\underbrace=\normalunderbrace

\iftutex
	\RequirePackage{unicode-math}
	\defaultfontfeatures{Scale=MatchLowercase}
	\defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
	%\setmathfont{Asana-Math.otf}
\fi

\theoremstyle{definition}
\newtheorem*{theorem}{Теорема}
\newtheorem{example}{Пример}

% ------------------ %
% Геометрия страницы %
% ------------------ %
\RequirePackage[left=3cm, right=1.5cm, top=2cm, bottom=2cm]{geometry}
\RequirePackage{setspace}
\onehalfspacing

\setlength{\parindent}{12.5mm}
\righthyphenmin=2

\widowpenalty=10000
\tolerance=1000

% --------- %
% Коробочки %
% --------- %
\RequirePackage{adjustbox}
\RequirePackage[most]{tcolorbox}

% ------ %
% Списки %
% ------ %
\RequirePackage{enumitem}
\AddEnumerateCounter{\Asbuk}{\russian@alph}{Щ}
\AddEnumerateCounter{\asbuk}{\russian@alph}{щ}

\RequirePackage{lmodern}
\providecommand{\tightlist}{%
	\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% ------ %
% Прочее %
% ------ %
\RequirePackage{xcolor}

\IfFileExists{microtype.sty}{
	\RequirePackage[]{microtype}
	\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}

% Подзаголовок на титульном листе
\RequirePackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{
	\apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother

% ----------------- %
% Ссылки и закладки %
% ----------------- %
\RequirePackage{bookmark}
\IfFileExists{xurl.sty}{\RequirePackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}

% Нужен biblatex!
\makeatletter
\@ifpackageloaded{biblatex}{%
	\DeclareFieldFormat{url}{%
		\mkbibacro{URL}\addcolon\space
		\href{#1}{\nolinkurl{\thefield{urlraw}}}}}{}
\makeatother

% ------- %
% Рисунки %
% ------- %
\RequirePackage{graphicx}

% ------------------ %
% Рисование графиков %
% ------------------ %
\RequirePackage{tikz}
\RequirePackage{pgfplots}
\RequirePackage{pgfplotstable}
\RequirePackage{colortbl}

% ------- %
% Таблицы %
% ------- %
\RequirePackage{longtable}
\RequirePackage{booktabs}
\RequirePackage{multicol}
\RequirePackage{multirow}
\RequirePackage{makecell}

\RequirePackage{siunitx}[=v2]
\sisetup{
	detect-all,
	table-number-alignment = center,
	table-figures-integer = 2,
	table-figures-decimal = 2
}

% -------- %
% Листинги %
% -------- %
\RequirePackage{minted}

\endinput
